#include "c0.h"

// Converts ascii characters to symbols
// 127 means unknown character, 123 are letters, 124 digits
char ctab[]={  0, 127, 127, 127, 127, 127, 127, 127,   /*  0 -  7 */
             127, 126, 125, 127, 127, 126, 127, 127,   /*  8 - 15 */
             127, 127, 127, 127, 127, 127, 127, 127,   /* 16 - 23 */
             127, 127, 127, 127, 127, 127, 127, 127,   /* 24 - 31 */
             126,  34, 122, 127, 127,  44,  47, 121,   /* 32 - 39 */
               6,   7,  42,  40,   9,  41, 127,  43,   /* 40 - 47 */
             124, 124, 124, 124, 124, 124, 124, 124,   /* 48 - 55 */
             124, 124,   8,   1,  63,  80,  65,  90,   /* 56 - 63 */
             127, 123, 123, 123, 123, 123, 123, 123,   /* 64 - 72 */
             123, 123, 123, 123, 123, 123, 123, 123,
             123, 123, 123, 123, 123, 123, 123, 123,
             123, 123, 123,   4, 127,   5,  49, 127,
             127, 123, 123, 123, 123, 123, 123, 123,
             123, 123, 123, 123, 123, 123, 123, 123,
             123, 123, 123, 123, 123, 123, 123, 123,
             123, 123, 123,   2,  48,   3, 127, 127};


int opdope[] ={
    000000,  // EOF
    000000,  // ;
    000000,  // {
    000000,  // }
    036000,  // [
    002000,  // ]
    036000,  // (
    002000,  // )
    014201,  // :
    007001,  // ,
    000000,  // 10
    000000,  // 11
    000000,  // 12
    000000,  // 13
    000000,  // 14
    000000,  // 15
    000000,  // 16
    000000,  // 17
    000000,  // 18
    000000,  // 19
    000000,  // name
    000000,  // short constant
    000000,  // string
    000000,  // float
    000000,  // double
    000000,  // 25
    000000,  // 26
    000000,  // 27
    000000,  // 28
    000000,  // 29
    034202,  // ++pre
    034202,  // --pre
    034202,  // ++post
    034202,  // --post
    034220,  // !un
    034202,  // &un
    034220,  // *un
    034200,  // -un
    034220,  // ~un
    000000,  // 39
    030101,  // +
    030001,  // -
    032101,  // *
    032001,  // //
    032001,  // %
    026061,  // >>
    026061,  // <<
    020161,  // &
    016161,  // |
    016161,  // ^
    000000,  // 50
    000000,  // 51
    000000,  // 52
    000000,  // 53
    000000,  // 54
    000000,  // 55
    000000,  // 56
    000000,  // 57
    000000,  // 58
    000000,  // 59
    022105,  // ==
    022105,  // !=
    024105,  // <=
    024105,  // <
    024105,  // >=
    024105,  // >
    024105,  // <p
    024105,  // <=p
    024105,  // >p
    024105,  // >=p
    012213,  // =+
    012213,  // =-
    012213,  // =*
    012213,  // =//
    012213,  // =%
    012253,  // =>>
    012253,  // =<<
    012253,  // =&
    012253,  // =|
    012253,  // =^
    012213,  // =
    000000,  // 81
    000000,  // 82
    000000,  // 83
    000000,  // int -> float (for assignment operator)
    000000,  // int -> double
    000000,  // float -> int
    000000,  // float -> double
    000000,  // double -> int
    000000,  // double -> float
    014201,  // ?
    000000,  // 91
    000000,  // 92
    000000,  // 93
    000000,  // int -> float
    000000,  // int -> double
    000000,  // float -> double
    000000,  // int -> int[]
    000000,  // int -> float[]
    000000,  // int -> double[]
    036001,  // call
    036001,  // mcall
};

/* descriptor of covnersions. a:b means first argument has type t, second has type b */
int cvtab[] ={
    0000,  // i:i
	0000,  // i:c
	0113,  // i:f
	0125,  // i:d
	0140,  // i:i[]
	0100,  // i:c[]
	0150,  // i:f[]
	0160,  // i:d[]
	0140,  // i:[][]

	0100,  // c:i
	0100,  // c:c
	0113,  // c:f
	0125,  // c:d
	0140,  // c:i[]
	0100,  // c:c[]
	0150,  // c:f[]
	0160,  // c:d[]
	0140,  // c[][]

	0211,  // f:i
	0211,  // f:c
	0000,  // f:f
	0136,  // f:d
	0211,  // f:i[]
	0211,  // f:c[]
	0211,  // f:f[]
	0211,  // f:d[]
	0211,  // f:[][]

	0222,  // d:i
	0222,  // d:c
	0234,  // d:f
	0000,  // d:d
	0222,  // d:i[]
	0222,  // d:c[]
	0222,  // d:f[]
	0222,  // d:d[]
	0222,  // d:[][]

	0240,  // i[]:i
	0240,  // i[]:c
	0113,  // i[]:f
	0125,  // i[]:d
	0000,  // i[]:i[]
	0000,  // i[]:c[]
	0100,  // i[]:f[]
	0100,  // i[]:d[]
	0100,  // i[]:[][]

	0000,  // c[]:i
	0000,  // c[]:c
	0113,  // c[]:f
	0125,  // c[]:d
	0200,  // c[]:i[]
	0000,  // c[]:c[]
	0200,  // c[]:f[]
	0200,  // c[]:d[]
	0200,  // c[]:[][]

	0250,  // f[]:i
	0250,  // f[]:c
	0113,  // f[]:f
	0125,  // f[]:d
	0000,  // f[]:i[]
	0000,  // f[]:c[]
	0000,  // f[]:f[]
	0100,  // f[]:d[]
	0000,  // f[]:[][]

	0260,  // d[]:i
	0260,  // d[]:c
	0113,  // d[]:f
	0125,  // d[]:d
	0000,  // d[]:i[]
	0000,  // d[]:c[]
	0000,  // d[]:f[]
	0000,  // d[]:d[]
	0000,  // d[]:[][]

	0240,  // [][]:i
	0240,  // [][]:c
	0113,  // [][]:f
	0125,  // [][]:d
	0000,  // [][]:i[]
	0000,  // [][]:c[]
	0100,  // [][]:f[]
	0100,  // [][]:d[]
	0000,  // [][]:[][]
};